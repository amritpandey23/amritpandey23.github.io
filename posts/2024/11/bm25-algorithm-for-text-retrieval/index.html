<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="BM25 algorithm is one of the most powerful algorithm in text search and retrieval that was created in 1994 but is still used today.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BM25 Algorithm for text retrieval | Amrit's Blog</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../../rss.xml">
<link rel="canonical" href="https://amritpandey23.github.io/posts/2024/11/bm25-algorithm-for-text-retrieval/">
<link rel="icon" href="../../../../images/favicon.ico" sizes="16x16">
<link rel="icon" href="../../../../images/android-chrome-192x192.png" sizes="192x192">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<meta name="author" content="Amrit">
<link rel="prev" href="../../09/a-simple-and-scalable-architecture-for-your-next-to-do-app/" title="A Simple and Scalable Architecture for Your Next To-Do App" type="text/html">
<meta property="og:site_name" content="Amrit's Blog">
<meta property="og:title" content="BM25 Algorithm for text retrieval">
<meta property="og:url" content="https://amritpandey23.github.io/posts/2024/11/bm25-algorithm-for-text-retrieval/">
<meta property="og:description" content="BM25 algorithm is one of the most powerful algorithm in text search and retrieval that was created in 1994 but is still used today.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-11-09T16:18:16+05:30">
<meta property="article:tag" content="ml">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-light
bg-light
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../../../">

            <span id="blog-title">Amrit's Blog</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../../../archive.html" class="nav-link">Blogs</a>
                </li>
<li class="nav-item">
<a href="../../../../pages/about/" class="nav-link">About</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Meta</a>
            <div class="dropdown-menu">
                    <a href="../../../../categories/" class="dropdown-item">Tags</a>
                    <a href="../../../../pages/knowledge-base/" class="dropdown-item">Knowledge Base</a>
            </div>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="form-inline" role="search">
<input type="hidden" name="sites" value="https://amritpandey23.github.io/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><div class="form-group mr-2" style="margin-bottom: 0">
    <input class="form-control" type="search" name="q" maxlength="255" placeholder="Search...">
</div>
<button type="submit" class="btn btn-primary">
<i class="fa-solid fa-magnifying-glass"></i>
</button>
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">BM25 Algorithm for text retrieval</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Amrit
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2024-11-09T16:18:16+05:30" itemprop="datePublished" title="11-2024">11-2024</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p><em>In today’s world, where information is abundant, text retrieval algorithms are crucial for filtering and ranking content based on relevance. Imagine searching for a document among thousands based on a few keywords—how does a search engine know which documents are most relevant? Two widely used methods, <strong>TF-IDF</strong> (Term Frequency-Inverse Document Frequency) and <strong>BM25</strong> (Best Matching 25), provide answers to this question. Let's explore how TF-IDF works, why it has limitations, and how BM25 was designed to address these issues.</em></p>
<h3>How Text Retrieval Works with TF-IDF</h3>
<p>Before diving into TF-IDF, let’s first understand the basic principles of text retrieval. When you input a search query, the retrieval system tries to find documents containing your keywords and ranks them according to their relevance. The goal is to display documents most relevant to your query at the top.</p>
<p><strong>TF-IDF</strong> is a fundamental scoring technique used in this process. Its purpose is to identify important words within a document and assign a higher weight to unique terms while down-weighting common terms. The TF-IDF score of a term in a document is calculated as follows:</p>
<ul>
<li>
<strong>Term Frequency (TF):</strong> Counts how often a term appears in a document. A higher frequency means the term is more significant within the document.</li>
<li>
<strong>Inverse Document Frequency (IDF):</strong> This measures the rarity of a term across the document collection. The idea is to down-weight terms that appear in many documents, as they are less useful for distinguishing between documents. Common words like “the,” “is,” and “and” have low IDF values because they are present in nearly every document, while more unique terms have higher IDF values. The IDF score is calculated as the logarithm of the total number of documents divided by the number of documents containing the term. This helps to emphasize unique words while down-weighting terms that are common across the entire collection.</li>
</ul>
<p>The formula for TF-IDF can be expressed as:</p>
<p><img alt="" src="../../../../images/bm25-1.png"></p>
<p>where <code>t</code> is the term, <code>d</code> is the document, <code>N</code> is the total number of documents, and <code>DF(t)</code> is the number of documents containing the term <code>t</code>.</p>
<p>TF-IDF provides a simple yet effective way to identify and weigh keywords in documents. However, it comes with limitations that can affect retrieval quality, especially in real-world applications.</p>
<h3>Problems with Traditional TF-IDF</h3>
<p>Despite its simplicity and effectiveness, TF-IDF has some notable issues:</p>
<ol>
<li>
<p><strong>Term Saturation Issue</strong><br>
   TF-IDF assumes that term frequency contributes linearly to relevance, meaning that a term appearing 10 times is twice as relevant as one appearing 5 times. However, this isn’t always true; a point is reached where adding more occurrences of a term doesn’t significantly increase relevance. TF-IDF doesn’t account for this “saturation effect,” leading to overemphasis on frequently repeated terms.</p>
</li>
<li>
<p><strong>Document Length Bias</strong><br>
   Longer documents are likely to contain more occurrences of search terms, simply because they have more content. TF-IDF tends to favor longer documents, even if they aren’t necessarily more relevant. This length bias means shorter, more focused documents may be ranked lower, even when they may be more relevant.</p>
</li>
<li>
<p><strong>Lack of Parameter Control</strong><br>
   TF-IDF is relatively rigid, with limited customization for different types of documents or retrieval scenarios. The scoring is solely based on term frequency and inverse document frequency, with no additional parameters to adjust for nuances like document length or term importance saturation.</p>
</li>
</ol>
<p>These limitations can cause TF-IDF to yield suboptimal results in real-world scenarios. This is where BM25, a more advanced probabilistic model, comes into play.</p>
<h3>How BM25 Improves Text Retrieval</h3>
<p>BM25, or Best Matching 25, was developed as part of the Okapi BM model family to address these very issues. BM25 is a scoring function that builds on TF-IDF but introduces additional controls, making it more flexible and effective in handling diverse document collections.</p>
<p>Here’s how BM25 addresses the limitations of TF-IDF:</p>
<p>1.<strong>Non-Linear Term Frequency Scaling</strong><br>
 BM25 introduces a concept called <em>term saturation</em>, where the relevance score increases with term frequency but at a diminishing rate. In other words, if a term appears five times in a document, the relevance increase is substantial, but after a certain threshold, additional occurrences contribute less and less to the score. This prevents documents from being unfairly ranked higher solely because of excessively repeated terms. BM25 achieves this using the parameter <code>k1</code>, which controls the term frequency’s impact. The formula is:</p>
<p><img alt="" src="../../../../images/bm25-2.png"></p>
<p>Here, <code>k1</code> can be adjusted based on the dataset to control how quickly the term frequency impact diminishes.</p>
<p>2.<strong>Document Length Normalization</strong><br>
 Unlike TF-IDF, BM25 considers document length when calculating relevance. It uses a parameter <code>b</code> to normalize for length, ensuring that longer documents are not unfairly favored over shorter ones. This length normalization helps prevent long documents from automatically receiving higher scores and allows shorter, more focused documents to be fairly ranked.</p>
<p>The formula for BM25 length normalization is:</p>
<p><img alt="" src="../../../../images/bm25-3.png"></p>
<p>Here, <code>L_d</code> is the document length, and <code>L_avg</code> is the average document length across the collection. The parameter <code>b</code> (typically between 0 and 1) controls the degree of length normalization.</p>
<p>3.<strong>Tunable Parameters for Greater Flexibility</strong><br>
 BM25’s parameters <code>k1</code> (for term frequency scaling) and <code>b</code> (for length normalization) allow it to be customized for different types of datasets and retrieval needs. This tunability makes BM25 adaptable for various scenarios, from large document collections to shorter, focused datasets.</p>
<h3>Why BM25 Is Superior for Modern Text Retrieval</h3>
<p>BM25 has become the default scoring model in many search engines and information retrieval systems, including Elasticsearch and Apache Lucene, thanks to its practical enhancements over TF-IDF. By addressing the limitations of term saturation, document length bias, and lack of flexibility, BM25 produces more accurate and reliable rankings, making it highly effective for real-world applications.</p>
<p>The differences may seem subtle, but in high-stakes search scenarios, these optimizations make a big difference. BM25’s ability to fine-tune term impact and document length ensures users receive relevant results without the pitfalls that plagued TF-IDF.</p>
<h3>Conclusion</h3>
<p>While TF-IDF laid the groundwork for text retrieval, BM25 built upon it to solve key issues, enhancing search relevance and performance. Today, BM25 remains a go-to algorithm for ranking documents effectively, proving its enduring value in the field of Information Retrieval.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../categories/ml/" rel="tag">ml</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../09/a-simple-and-scalable-architecture-for-your-next-to-do-app/" rel="prev" title="A Simple and Scalable Architecture for Your Next To-Do App">Previous post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer"></footer>
</div>
</div>


        <script src="../../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script><footer class="py-4 footer-background"><div class="container text-center">
      <p class="mb-2">Connect with me</p>
      <div class="d-flex justify-content-center mb-3">
        <a href="https://www.youtube.com/@AmritPandey" target="_blank" class="social-link mx-3" aria-label="YouTube">
          <i class="fab fa-youtube fa-2x"></i> YouTube
        </a>
        <a href="https://www.linkedin.com/in/amritpandey23/" target="_blank" class="social-link mx-3" aria-label="LinkedIn">
          <i class="fab fa-linkedin fa-2x"></i> Linkedin
        </a>
        <a href="https://github.com/amritpandey23" target="_blank" class="social-link mx-3" aria-label="GitHub">
          <i class="fab fa-github fa-2x"></i> GitHub
        </a>
      </div>
      <p class="small mb-0">Contents © 2024 Amrit Pandey. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>
